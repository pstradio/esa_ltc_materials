- Cut the C3S stack to days after 2000 or so


- SMAPI: Can we use moving average? or to clim mean, but then it's only a relative anomaly? Add sliders?
- swdi: field capacity and wilting point



smasi['index'] = smasi['index'].rolling(3, min_periods=1).mean()

duration, severity = index_metrics(smasi['index'])

smasi.loc[:, 'duration'] = duration
smasi.loc[:, 'severity'] = severity
smasi.loc[:, 'intensity'] = smasi['severity'] / smasi['duration']
    
fig, axs = plt.subplots(2, 2, figsize=(12, 5))

axs[0, 0].fill_between(smasi['index'].index, smasi['index'].values, where=smasi['index'].values>=0, color='blue')
axs[0, 0].fill_between(smasi['index'].index, smasi['index'].values, where=smasi['index'].values<0, color='red')
axs[0, 0].set_ylabel('SMASI[-]')
axs[0, 0].set_title(f"SMASI-M at Lon: 8.625°, Lat: 44.625°")

smasi['intensity'].fillna(0).plot(title=f'Intensity', ax=axs[1, 0], ylabel='Severity / Duration')
smasi['duration'].plot(title=f'Duration', ax=axs[0, 1], ylabel='months')
smasi['severity'].plot(title=f'Severity', ax=axs[1, 1], ylabel="$\sum{SPI}$")
plt.tight_layout()